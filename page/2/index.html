<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 2 页 | xanarry&#39;s</title>
  <meta name="author" content="xanarry">
  
  <meta name="description" content="xanarry&#39;s blog">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="xanarry&#39;s"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="xanarry&#39;s" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">xanarry&#39;s</a></h1>
  <h2><a href="/">创造就是一个构造过程的过程!</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-26T13:26:19.000Z"><a href="/2015/05/26/C语言中字符串的复制与memcpy函数/">2015-05-26</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/26/C语言中字符串的复制与memcpy函数/">C语言中字符串的复制与memcpy函数</a></h1>
  

    </header>
    <div class="entry">
      
        <p>今天在线做360实习生笔试题, 发现大多数题还是比较基础的, 但都需要仔细斟酌. 不过我已被虐得面目全非, 操作系统和计算机网络相关的很多知识都不会, 还得努力学习. 不过说重点, 面试题有两个编程题, 第一个是实现hashmap, 第二题是一个字符串的处理, 我主要说说第二题, 题目描述如下:</p>
<pre><code>实现域名的字段顺序翻转函数,比如输入www<span class="class">.so</span><span class="class">.com</span>, 输出为com<span class="class">.so</span><span class="class">.www</span>, 要求实现的效率尽可能的优化
</code></pre><p>我在做这个题的时候还剩下不到10分钟, 慌忙中将题目看复杂了,我想成会有<em>www.abc.efg.com</em>这样的情况了, 于是惯性思维促使我使用c++将域名按”.”切片, 然后逆序输出, 写的也烂, 也不是效率最高的, 提交后再看题目发现域名是只有<em>www</em>和<em>域名本体</em>和<em>com</em>三个部分, 当然后面的的<em>com</em>可能是其他的后缀,比如<em>io</em>或者<em>info</em>之类的, 发现直接是<em>memcpy()</em>复制内存片段效率应该会更高, 即首先复制后缀, 然后复制域名本体, 然后再复制<em>www</em>到字符串缓冲区,然后输出就是结果了,于是用c实现了这个方法:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">trans</span><span class="params">(<span class="keyword">char</span> *res, <span class="keyword">char</span> *a)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">strcat</span>(a, <span class="string">"."</span>); <span class="comment">//在域名默认加上".", 因为"com", 移动到最前面后后面需要一个"."</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *src = a; <span class="comment">//复制一个常量副本, 因为memcpy()函数的参数中要求常量</span></span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(src) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> i = len;</span><br><span class="line">    <span class="keyword">while</span>(src[--i] != <span class="string">'.'</span>); <span class="comment">//找到后开始的下标</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">memcpy</span>(res, src + i + <span class="number">1</span>, (len - i) * <span class="keyword">sizeof</span>(<span class="keyword">char</span>)); <span class="comment">//复制后缀到res字符串缓冲区的起点</span></span><br><span class="line">    <span class="built_in">memcpy</span>(res + (len - i), src + <span class="number">4</span>, (i - <span class="number">3</span>) * <span class="keyword">sizeof</span>(<span class="keyword">char</span>)); <span class="comment">//将域名内容复制到res缓冲区的末尾</span></span><br><span class="line">    <span class="built_in">memcpy</span>(res + (len + <span class="number">1</span> - <span class="number">4</span>), src, <span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="keyword">char</span>)); <span class="comment">//继续将"www"复制到res末尾</span></span><br><span class="line">    res[len] = <span class="string">'\0'</span>; <span class="comment">//设置字符串结束标志</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">100</span>], res[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, a);</span><br><span class="line">    trans(res, a);</span><br><span class="line">    <span class="built_in">puts</span>(res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果如下:</p>
<pre><code>www<span class="class">.baidu</span><span class="class">.com</span>
com<span class="class">.baidu</span><span class="class">.www</span>
</code></pre><p>关于c语言中字符串的复制, 通常可以使用<em>strcpy()</em>来实现, 当然也可手动写个循环, 但是复制效率是最低的, 无论是从人的角度还是计算机的角度来说, 第三个就是直接使用<em>memcpy()</em>, 直接将复制目标内存片段到指定位置, 并且复制速度是最快的, 但是<em>strcpy()</em>与<em>memcpy()</em>在用来复制字符串的时候有一个小小的区别就是无论如何<em>strcpy()</em>从字符串的开始只复制到第一个”\0”的位置, 但是由于<em>memcpy()</em>是整个内存片段,所以”\0”也不会被忽略, 虽然最后复制内容输入到屏幕显示的结果是一样的, 我们用个小程序演示一下这个区别:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a[<span class="number">20</span>] = <span class="string">"asdf\0uiop"</span>;</span><br><span class="line">    <span class="keyword">char</span> b[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">char</span> c[<span class="number">20</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">strcpy</span>(b, a);</span><br><span class="line">    <span class="built_in">puts</span>(b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="built_in">strlen</span>(a));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">5</span>; i &lt; <span class="number">9</span>; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%c"</span>, b[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"-----------------------"</span>);</span><br><span class="line">    <span class="built_in">memcpy</span>(c, a, <span class="number">9</span> * <span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">    <span class="built_in">puts</span>(c);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="built_in">strlen</span>(c));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">5</span>; i &lt; <span class="number">9</span>; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%c"</span>, c[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果如下:</p>
<pre><code>asdf
4
S

-<span class="ruby">----------------------
</span>asdf
4
uiop
请按任意键继续. . .
</code></pre><p>从结果可以看出,使用<em>strcpy()</em>仅仅复制到了”\0”, 因为输出b的后半部分结果是未定义的,说明并没有复制过来, 但是输出c的后半部分是, 输出了事先定义的结果</p>
<p>同样, 利用<em>memcpy()</em>函数的特性, 我们可以做一个泛型的交换函数:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;string.h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//因为交换的数据类型是未知的, 所以添加一个额外的参数告诉函数复制多长内存片段</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">void</span> *a, <span class="keyword">void</span> *b, <span class="keyword">int</span> size)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buffer[size];</span><br><span class="line">    <span class="built_in">memcpy</span>(buffer, a, size);</span><br><span class="line">    <span class="built_in">memcpy</span>(a, b, size);</span><br><span class="line">    <span class="built_in">memcpy</span>(b, buffer, size);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a = <span class="string">'a'</span>, b = <span class="string">'b'</span>;</span><br><span class="line">    swap(&amp;a, &amp;b, <span class="keyword">sizeof</span>(<span class="keyword">char</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a = %c b = %c\n"</span>, a , b);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">11</span>, y = <span class="number">99</span>;</span><br><span class="line">    swap(&amp;x, &amp;y, <span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"x = %d y = %d\n"</span>, x , y);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出:</p>
<pre><code><span class="tag">a</span> = <span class="tag">b</span> <span class="tag">b</span> = <span class="tag">a</span>
x = <span class="number">99</span> y = <span class="number">11</span>
</code></pre>
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-25T14:37:28.000Z"><a href="/2015/05/25/python字典/">2015-05-25</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/25/python字典/">python字典</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="1-_简介:">1. 简介:</h2><p>字典是一种<em>键映射到值</em>的数据结构,相当于高级一点的列表, 列表的键只能是0到n的整数,通过数字的索引我们就能访问,修改到相关位置的数据, 字典也一样, 高级的地方就在于, 索引不是系统分配的整数, 而是可以使用自定义的内容来做访问的索引值, 这种特性给编程带来极大的便利,值得注意的是<font color="0080ff"><strong>python字典的键必须是不可变的，所以可以用数字，字符串或元组充当，但是不能使用列表,因为列表中的元素可能被无意修改 值可以是任意数据类型, 还有非常重要的一点就是字典内容的存储顺序是无序的</strong></font>, </p>
<h2 id="2-_定义:">2. 定义:</h2><p>定义字典时键与值之间用冒号(:)隔开, 键值对之间用逗号(,)隔开, 将所有完整的键值对放在花括号中({}),就实现的字典的初始化定义, 也可以使用dict()将其他内容转为字典.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">d1 = &#123;<span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125; <span class="comment">#定义字典</span></span><br><span class="line">d2 = &#123;&#125; <span class="comment">#定义空字典</span></span><br><span class="line"><span class="comment">#使用其他数据生成字典</span></span><br><span class="line">d3 = dict(one=<span class="number">1</span>, two=<span class="number">2</span>, three=<span class="number">3</span>)</span><br><span class="line">d4 = dict(zip([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line">d5 = dict([(<span class="string">'two'</span>, <span class="number">2</span>), (<span class="string">'one'</span>, <span class="number">1</span>), (<span class="string">'three'</span>, <span class="number">3</span>)])</span><br><span class="line">d6 = dict(&#123;<span class="string">'three'</span>: <span class="number">3</span>, <span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'two'</span>: <span class="number">2</span>&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="3-_访问与修改:">3. 访问与修改:</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dict0 = &#123;<span class="string">"name"</span>:<span class="string">"Bob"</span>, <span class="string">"sex"</span>:<span class="string">"F"</span>, <span class="string">"age"</span>:<span class="number">21</span>&#125; <span class="comment">#初始化字典</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#向字典中插入新的元素,类似于c++的map</span></span><br><span class="line">dict0[<span class="string">"addr"</span>] = <span class="string">"chongqing"</span> <span class="comment">#想dict0字典中添加地址"addr"项, 值为"chongqing"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如果使用字典中已经存在的key,那么后面的值将会替换前面的值,这里会将年龄替换为22</span></span><br><span class="line">dict0[<span class="string">"age"</span>] = <span class="number">22</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#访问字典中的键"name"对应的值</span></span><br><span class="line">name = dict0[<span class="string">"name"</span>] <span class="comment">#和列表访问方式一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用get()函数访问第几个条目</span></span><br><span class="line">t = dict3.get(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="3-1_删除条目">3.1 删除条目</h4><pre><code><span class="tag">del</span> dict0[<span class="string">"name"</span>] #删除<span class="string">"name"</span>这一项
dict0.<span class="function"><span class="title">clear</span><span class="params">()</span></span> #删除字典中的所有内容,即设为空字典
<span class="tag">del</span> dict0 #直接删除字典,这个东西就从世界上消失了
t = dict3.<span class="function"><span class="title">pop</span><span class="params">(<span class="number">1</span>)</span></span> #<span class="function"><span class="title">pop</span><span class="params">()</span></span>函数将会删除字典的键值对,并返回该值
</code></pre><h2 id="4-_遍历字典">4. 遍历字典</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">print(dict0) <span class="comment">#按输出key-value对, 输入内容和定义时一样的</span></span><br><span class="line"><span class="comment">#使用print(d1)输出的内容如下</span></span><br><span class="line">    &#123;<span class="string">'two'</span>: <span class="number">2</span>, <span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'three'</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#如果我们使用:</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> dict0:</span><br><span class="line">    print(x)</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出的值只有所有键的值, 而不是字典中所有的键值对, 再额外输出dict0[x], 就能输出键值对了</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> dict0:</span><br><span class="line">    print(x + <span class="string">" : "</span> + repr(dict0[x]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#因为字典中的每项是以tuple存储的, 亦可以使用如下方式遍历输出:</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> dict0:</span><br><span class="line">    print(str(x[<span class="number">0</span>]) + <span class="string">"-&gt;"</span> + str(x[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出所有键</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> dict0.keys():</span><br><span class="line">    print(x)</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出所有值</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> dict0.values():</span><br><span class="line">    print(x)</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出键值对</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> dict0.items:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure>
<h2 id="5-_比较与排序">5. 比较与排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#比较两个字典是否相同</span></span><br><span class="line">print(dict1 == dict2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"><span class="comment">#定义新的字典</span></span><br><span class="line">d = &#123;<span class="string">'a'</span>:<span class="number">2</span>, <span class="string">'b'</span>:<span class="number">23</span>, <span class="string">'c'</span>:<span class="number">5</span>, <span class="string">'d'</span>:<span class="number">17</span>, <span class="string">'e'</span>:<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#对字典按键升序排序</span></span><br><span class="line">print(<span class="string">"按键升序排序"</span>)</span><br><span class="line"><span class="comment">#分别获取容器,容器中单元的排序关键字,下标0,即d[0],表示键,d[1]表示值</span></span><br><span class="line">sd = sorted(d.items(), key = <span class="keyword">lambda</span> d:d[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#对字典按键降序序排序</span></span><br><span class="line">print(<span class="string">"按键降序序排序"</span>)</span><br><span class="line">sd = sorted(d.items(), key = <span class="keyword">lambda</span> d:d[<span class="number">0</span>], reverse = <span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#对字典按值升序排序</span></span><br><span class="line">print(<span class="string">"按值升序排序"</span>)</span><br><span class="line">sd = sorted(d.items(), key = <span class="keyword">lambda</span> d:d[<span class="number">1</span>], reverse = <span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#对字典按值降序排序</span></span><br><span class="line">print(<span class="string">"按值降序排序"</span>)</span><br><span class="line">sd = sorted(d.items(), key = <span class="keyword">lambda</span> d:d[<span class="number">1</span>], reverse = <span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<font color="0080ff"><br><strong>注意:reverse的参数默认是False,即升序排序,要逆序排序请将reverse值该为True,包括sort函数,也可以传递reverse参数设定排序方式</strong></font>


<h2 id="6-_其他">6. 其他</h2><p>6.1 输出字典中的item的数量</p>
<pre><code>print<span class="list">(<span class="keyword">len</span><span class="list">(<span class="keyword">dict1</span>)</span>)</span>
</code></pre><p>6.2 得到字典的浅复制,即修改复制的字典不会影响到原有的字典</p>
<pre><code>dict3 = dict1.<span class="function"><span class="title">copy</span><span class="params">()</span></span>
</code></pre><p>6.3 “key” in “dict name”判断是否已经包含某个键,功能和c++ map对象的count()一致</p>
<pre><code><span class="built_in">print</span>(<span class="number">1</span> <span class="keyword">in</span> dict0) <span class="comment">#返回bool值</span>
</code></pre>
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-25T14:37:01.000Z"><a href="/2015/05/25/python中各种排序方式的使用/">2015-05-25</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/25/python中各种排序方式的使用/">python中各种排序方式的使用</a></h1>
  

    </header>
    <div class="entry">
      
        <p>python提供内置的排序函数<em>sorted()</em>和列表排序的函数<em>sort()</em>, 灵活使用这两个函数足以完成大多数排序的需求, 当然也可以手写排序函数, 其中, sort函数有三个参数sort(*, key=None, reverse=None), 第一个参数一般不用, 第二个参数指定排序的关键词, 第三个参数表示是否逆序, 默认数字按大小,字符串按字典序升序排序,对于多属性对象,也可以指定关键字排序,后面说到 </p>
<h2 id="1-_对列表排序">1. 对列表排序</h2><pre><code><span class="keyword">nums</span> =<span class="sqbracket"> [10, 3, 4, 1, 2, 9, 6, 5, 8, 7, 0]</span>
</code></pre><p>对于只有单一属性元素的列表,可以直接使用<em>a.sort()</em>排序, 如果想要降序排序, 则加参数<strong>“reverse = True”</strong>即可</p>
<pre><code>nums.<span class="function"><span class="title">sort</span><span class="params">()</span></span> #升序排序
nums.<span class="function"><span class="title">sort</span><span class="params">(reverse = True)</span></span> #降序排序
</code></pre><p>同样可以使用内置函数sorted实现排序,返回一个有序序列</p>
<pre><code>tnums = <span class="function"><span class="title">sorted</span><span class="params">(nums)</span></span> #返回一个升序序列给tnums
tnums = <span class="function"><span class="title">sorted</span><span class="params">(nums, reverse = True)</span></span> #返回一个降序序列
</code></pre><p>对于复合型列表指定关键词排序</p>
<pre><code>nums = [<span class="params">(<span class="string">"ten"</span>, <span class="number">10</span>)</span>, <span class="params">(<span class="string">"three"</span>, <span class="number">3</span>)</span>, <span class="params">(<span class="string">"four"</span>, <span class="number">4</span>)</span>, <span class="params">(<span class="string">"one"</span>, <span class="number">1</span>)</span>, <span class="params">(<span class="string">"two"</span>, <span class="number">2</span>)</span>, <span class="params">(<span class="string">"nine"</span>, <span class="number">9</span>)</span>]
</code></pre><p>按元组列表中的单词排序</p>
<pre><code>nums.<span class="function"><span class="title">sort</span><span class="params">(key = lambda x : x[<span class="number">0</span>])</span></span> 
</code></pre><p>输出排序结果: </p>
<pre><code><span class="collection">[<span class="list">(<span class="keyword">'four'</span>, <span class="number">4</span>)</span>, <span class="list">(<span class="keyword">'nine'</span>, <span class="number">9</span>)</span>, <span class="list">(<span class="keyword">'one'</span>, <span class="number">1</span>)</span>, <span class="list">(<span class="keyword">'ten'</span>, <span class="number">10</span>)</span>, <span class="list">(<span class="keyword">'three'</span>, <span class="number">3</span>)</span>, <span class="list">(<span class="keyword">'two'</span>, <span class="number">2</span>)</span>]</span>
</code></pre><p>按元组列表中的数字排序</p>
<pre><code>nums.<span class="function"><span class="title">sort</span><span class="params">(key = lambda x : x[<span class="number">1</span>])</span></span> 
</code></pre><p>输出排序结果:</p>
<pre><code><span class="collection">[<span class="list">(<span class="keyword">'one'</span>, <span class="number">1</span>)</span>, <span class="list">(<span class="keyword">'two'</span>, <span class="number">2</span>)</span>, <span class="list">(<span class="keyword">'three'</span>, <span class="number">3</span>)</span>, <span class="list">(<span class="keyword">'four'</span>, <span class="number">4</span>)</span>, <span class="list">(<span class="keyword">'nine'</span>, <span class="number">9</span>)</span>, <span class="list">(<span class="keyword">'ten'</span>, <span class="number">10</span>)</span>]</span>
</code></pre><h2 id="2-_对字典进行排序">2. 对字典进行排序</h2><p><strong>不要奢望python能像c++一样企图得到一个有序的dict,因为python使用的hash实现字典, 这是不可能的, 但是能将字典排序后的内容保存到一个列表中.</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">enum = [<span class="string">"zero"</span>, <span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>, <span class="string">"five"</span>, <span class="string">"six"</span>, <span class="string">"seven"</span>, <span class="string">"eight"</span>, <span class="string">"nine"</span>, <span class="string">"ten"</span>]</span><br><span class="line">nnum = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]</span><br><span class="line">sdict = dict(zip(nnum, enum)) <span class="comment">#使用上面两个列表生成key为数字, value为字符串的字典</span></span><br><span class="line">tdict = sorted(sdict.items(), key = <span class="keyword">lambda</span> x : x[<span class="number">1</span>]) <span class="comment">#使用sorted函数对字典按value排序</span></span><br></pre></td></tr></table></figure>
<p>按value值排序输出</p>
<pre><code><span class="number">8</span> <span class="constant">eight</span>
<span class="number">5</span> <span class="constant">five</span>
<span class="number">4</span> <span class="constant">four</span>
<span class="number">9</span> <span class="constant">nine</span>
<span class="number">1</span> <span class="constant">one</span>
<span class="number">7</span> <span class="constant">seven</span>
<span class="number">6</span> <span class="constant">six</span>
<span class="number">10</span> <span class="constant">ten</span>
<span class="number">3</span> <span class="constant">three</span>
<span class="number">2</span> <span class="constant">two</span>
<span class="number">0</span> <span class="constant">zero</span>
</code></pre><p>对dict按key降序排序</p>
<pre><code>tdict = sorted<span class="list">(<span class="keyword">sdict</span>.items<span class="list">()</span>, key = lambda x: x[<span class="number">0</span>], reverse = True)</span>
</code></pre><p>输出按key排序后的结果</p>
<pre><code><span class="number">0</span> <span class="constant">zero</span>
<span class="number">1</span> <span class="constant">one</span>
<span class="number">2</span> <span class="constant">two</span>
<span class="number">3</span> <span class="constant">three</span>
<span class="number">4</span> <span class="constant">four</span>
<span class="number">5</span> <span class="constant">five</span>
<span class="number">6</span> <span class="constant">six</span>
<span class="number">7</span> <span class="constant">seven</span>
<span class="number">8</span> <span class="constant">eight</span>
<span class="number">9</span> <span class="constant">nine</span>
<span class="number">10</span> <span class="constant">ten</span>
</code></pre><h2 id="3-_按对象的属性排序">3. 按对象的属性排序</h2><p>定义book类,有书名和价格两个属性, 然后对book对象排序<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">book</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, price)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.price = price</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"name: "</span> + str(self.name) + <span class="string">", price: "</span> + str(self.price)</span><br><span class="line"></span><br><span class="line">生成对象列表</span><br><span class="line">name = [<span class="string">"ed"</span>, <span class="string">"dfw"</span>, <span class="string">"zert"</span>, <span class="string">"gwert"</span>, <span class="string">"rgsd"</span>, <span class="string">"hkjhi"</span>, <span class="string">"ydfg"</span>, <span class="string">"indf"</span>, <span class="string">"kjsdf"</span>, <span class="string">"kenfs"</span>]</span><br><span class="line">price = [<span class="number">123</span>, <span class="number">435</span>, <span class="number">12</span>, <span class="number">56</span>, <span class="number">23</span>, <span class="number">12</span>, <span class="number">674</span>, <span class="number">123</span>, <span class="number">3452</span>, <span class="number">979</span>]</span><br><span class="line">books = list(book(x, y) <span class="keyword">for</span> x, y <span class="keyword">in</span> zip(name, price))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> books: </span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure></p>
<p>输出原始序列</p>
<pre><code><span class="string">name:</span> ed, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> dfw, <span class="string">price:</span> <span class="number">435</span>
<span class="string">name:</span> zert, <span class="string">price:</span> <span class="number">12</span>
<span class="string">name:</span> gwert, <span class="string">price:</span> <span class="number">56</span>
<span class="string">name:</span> rgsd, <span class="string">price:</span> <span class="number">23</span>
<span class="string">name:</span> hkjhi, <span class="string">price:</span> <span class="number">12</span>
<span class="string">name:</span> ydfg, <span class="string">price:</span> <span class="number">674</span>
<span class="string">name:</span> indf, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> kjsdf, <span class="string">price:</span> <span class="number">3452</span>
<span class="string">name:</span> kenfs, <span class="string">price:</span> <span class="number">979</span>
</code></pre><p>使用sorted按书名排序</p>
<pre><code>sbooks = <span class="function"><span class="title">sorted</span><span class="params">(books, key = lambda x : x.name)</span></span>
</code></pre><p>输出结果:</p>
<pre><code><span class="string">name:</span> dfw, <span class="string">price:</span> <span class="number">435</span>
<span class="string">name:</span> ed, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> gwert, <span class="string">price:</span> <span class="number">56</span>
<span class="string">name:</span> hkjhi, <span class="string">price:</span> <span class="number">12</span>
<span class="string">name:</span> indf, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> kenfs, <span class="string">price:</span> <span class="number">979</span>
<span class="string">name:</span> kjsdf, <span class="string">price:</span> <span class="number">3452</span>
<span class="string">name:</span> rgsd, <span class="string">price:</span> <span class="number">23</span>
<span class="string">name:</span> ydfg, <span class="string">price:</span> <span class="number">674</span>
<span class="string">name:</span> zert, <span class="string">price:</span> <span class="number">12</span>
</code></pre><p>按书价排序</p>
<pre><code>tbooks.<span class="function"><span class="title">sort</span><span class="params">(key = lambda x: x.price)</span></span>
<span class="function"><span class="title">print</span><span class="params">(tbooks)</span></span> #这里会输出按书价升序排序的序列
</code></pre><p>对多个关键词自定义排序,方法也比较简单, 对单个关键词排序, 我们lambda表达式中给<em>key</em>返回单个关键词, 那么对多个关键字排序, 只需要在lambda表达式中返回一个元组即可, <em>sorted()</em>会首先按第一个元素排序, 然后第二个, 依次类推… </p>
<p>下面看看对书本先按价格排序,如果价格相同,那么再按书名字典序排序的示例:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sbooks = sorted(books, key = <span class="keyword">lambda</span> x : (x.price, x.name))</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> sbooks:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure>
<p>输出结果:</p>
<pre><code><span class="string">name:</span> hkjhi, <span class="string">price:</span> <span class="number">12</span>
<span class="string">name:</span> zert, <span class="string">price:</span> <span class="number">12</span>
<span class="string">name:</span> rgsd, <span class="string">price:</span> <span class="number">23</span>
<span class="string">name:</span> gwert, <span class="string">price:</span> <span class="number">56</span>
<span class="string">name:</span> ed, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> indf, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> dfw, <span class="string">price:</span> <span class="number">435</span>
<span class="string">name:</span> ydfg, <span class="string">price:</span> <span class="number">674</span>
<span class="string">name:</span> kenfs, <span class="string">price:</span> <span class="number">979</span>
<span class="string">name:</span> kjsdf, <span class="string">price:</span> <span class="number">3452</span>
</code></pre><p>对于按多个关键词排序, 如果我们想对其中某些关键词按降序排序怎么办呢因为默认都是升序的, 当初我查了很久才搞定这问题, 但实际上方法很简单, 直接在lambda表式中在<font color="0080ff"><strong>需要降序排序的关键词前面加一个负号(-)</strong></font>就可以了</p>
<p>同样对于上述例子, 如果想先按姓名长度排序,如果长度相同,那么再按价格降序排序,使用下面的方法即可</p>
<pre><code>sbooks = sorted<span class="list">(<span class="keyword">books</span>, key = lambda x : <span class="list">(<span class="keyword">len</span><span class="list">(<span class="keyword">x</span>.name)</span>, -x.price)</span>)</span>
</code></pre><p>输出结果:</p>
<pre><code><span class="string">name:</span> ed, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> dfw, <span class="string">price:</span> <span class="number">435</span>
<span class="string">name:</span> ydfg, <span class="string">price:</span> <span class="number">674</span>
<span class="string">name:</span> indf, <span class="string">price:</span> <span class="number">123</span>
<span class="string">name:</span> rgsd, <span class="string">price:</span> <span class="number">23</span>
<span class="string">name:</span> zert, <span class="string">price:</span> <span class="number">12</span>
<span class="string">name:</span> kjsdf, <span class="string">price:</span> <span class="number">3452</span>
<span class="string">name:</span> kenfs, <span class="string">price:</span> <span class="number">979</span>
<span class="string">name:</span> gwert, <span class="string">price:</span> <span class="number">56</span>
<span class="string">name:</span> hkjhi, <span class="string">price:</span> <span class="number">12</span>
</code></pre><p>对象排序我们还可以使用attrgetter(key1, key2…)指派排序关键词, 使用前导入”operator”. 下面这例子先按books中的name属性排序,相同按price排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> operator</span><br><span class="line">sbooks = sorted(books, key = operator.attrgetter(<span class="string">"name"</span>, <span class="string">"price"</span>))</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-25T14:36:04.000Z"><a href="/2015/05/25/python实现高精度乘法/">2015-05-25</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/25/python实现高精度乘法/">python实现高精度乘法</a></h1>
  

    </header>
    <div class="entry">
      
        <p>方法还是将两个乘数转为两个包含乘数每位数字的list,<br>因为在计算中两个list中的数据要反复使用,所以定义第三个list来保存乘法的运算结果,然后使用两重循序模拟列竖式计算出乘法运算的结果, 因为乘法运算每次运算时需要向前移动一位表示扩大10倍,所以定义变量pos标记计算时移动的位数, 每次移动一位<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    a = list(map(<span class="keyword">lambda</span> x : int(x), a.strip()))</span><br><span class="line">    b = list(map(<span class="keyword">lambda</span> x : int(x), b.strip()))</span><br><span class="line">    c = list(map(<span class="keyword">lambda</span> x : <span class="number">0</span>, (<span class="string">"0"</span> + str(a) + str(b)).strip()))</span><br><span class="line">    index = len(c) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a) - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        pos = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(b) - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">            temp = a[i] * b[j] + c[index - pos] <span class="comment">#两个乘数相乘,并加上在此前一次的进位</span></span><br><span class="line">            c[index - pos] = temp % <span class="number">10</span> <span class="comment">#保存运算求余结果</span></span><br><span class="line">            c[index - pos - <span class="number">1</span>] += temp // <span class="number">10</span> <span class="comment">#处理进位,进位可以是0或者大于0的数</span></span><br><span class="line">            pos += <span class="number">1</span></span><br><span class="line">        index -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> int(reduce(<span class="keyword">lambda</span> x, y : str(x) + str(y), c)) <span class="comment">#将list中的内容转换为字符串</span></span><br><span class="line"></span><br><span class="line">a = input(<span class="string">"input a: "</span>)</span><br><span class="line">b = input(<span class="string">"input b: "</span>)</span><br><span class="line">print(multiply(a, b))</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-25T14:35:52.000Z"><a href="/2015/05/25/python实现高精度减法/">2015-05-25</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/25/python实现高精度减法/">python实现高精度减法</a></h1>
  

    </header>
    <div class="entry">
      
        <p>减法的实现同加法基本一致, 也是模拟竖式计算, 额外的处理了一下输入数值大小的问题,否则不然代码量可以更少. 在此不再做过多陈述, 从代码看问题吧!<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cmpare</span><span class="params">(a, b)</span>:</span><span class="comment">#定义函数比较两个数值大小</span></span><br><span class="line">    <span class="keyword">if</span> (len(a) != len(b)):</span><br><span class="line">        <span class="keyword">return</span> len(a) - len(b)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">            <span class="keyword">if</span> a[i] != b[i]:</span><br><span class="line">                <span class="keyword">return</span> a[i] - b[i]</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minus</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    optr = <span class="string">"+"</span>;</span><br><span class="line">    <span class="keyword">if</span> (cmpare(a, b) &lt; <span class="number">0</span>):</span><br><span class="line">        optr = <span class="string">'-'</span><span class="comment">#如果减数大于被减数,设置符号为负号</span></span><br><span class="line">        temp = a<span class="comment">#并且交换两个数,保证始终用大数减小数</span></span><br><span class="line">        a = b</span><br><span class="line">        b = temp</span><br><span class="line">        </span><br><span class="line">    a = list(map(<span class="keyword">lambda</span> x : int(x), (<span class="string">"0"</span> + str(a)).strip()))</span><br><span class="line">    b = list(map(<span class="keyword">lambda</span> x : int(x), (<span class="string">"0"</span> + str(b)).strip()))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> len(a) &gt; len(b):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> range(len(a) - len(b)):</span><br><span class="line">            b.insert(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> range(len(b) - len(a)):</span><br><span class="line">            a.insert(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a) - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> (a[i] &gt;= b[i]):</span><br><span class="line">            a[i] -= b[i]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            a[i] = a[i] + <span class="number">10</span> - b[i]</span><br><span class="line">            a[i - <span class="number">1</span>] -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> int(optr + reduce(<span class="keyword">lambda</span> x, y : str(x) + str(y), a))</span><br><span class="line"></span><br><span class="line">a = input(<span class="string">"input a: "</span>)</span><br><span class="line">b = input(<span class="string">"input b: "</span>)</span><br><span class="line">print(minus(a, b))</span><br></pre></td></tr></table></figure></p>
<p><em>注意: 输入仅限两个正整数, 输入不分大小</em></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-25T14:35:40.000Z"><a href="/2015/05/25/python实现高精度加法/">2015-05-25</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/25/python实现高精度加法/">python实现高精度加法</a></h1>
  

    </header>
    <div class="entry">
      
        <p>之前一直使用的c++, c++没有提供高精度的计算方案, 所以大整数的运算都需要手动实现,python已经为我们提供了高精度运算, 这里出于刚学习python作为练习, 代码实现高精度加法运算的原理. 高精度加法的过程就是完全模拟列竖式计算的方式,我们开两个列表,将加数a,假如a=1243,在列表中保存为[1, 2, 4, 3], 加数b, 假如b=12, 在列表中保存为[1, 2], 这样的话两个列表的长度不同, 就会后面代码实现的不便, 因此, 在执行计算前, 我们将两个列表处理为</p>
<pre><code>[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>]
[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]
</code></pre><p>即使两个数长度一致, 短的在左边补0, 最后再在两个数左端都添加一个0, 这样是为了防止最高位进位后导致进位的值没有地方存储, 我们从右边计算到左边,将计算的每一位数保存到列表a中, 上面两个数相加时2+3=5求余保存到a[4], 取整加到a[3]处理进位,4+1=5求余保存到a[3], 取整加到a[2], 依次类推, 如果两数之和大于10, 则有进位1, 否则就是进位0, 相当于没有进位</p>
<p>下面请看代码实现:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce<span class="comment">#导入reduce用于将整数列表中的内容转换为字符串</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> len(a) &gt; len(b):<span class="comment">#将输入的数字左端补齐为同样的长度</span></span><br><span class="line">        b = b.zfill(len(a) - len(b) + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        a = a.zfill(len(b) - len(a) + <span class="number">1</span>)</span><br><span class="line">    <span class="comment">#("0" + str(a))前面加"0"的原因是防止最高位进位是超过列表的容量限制</span></span><br><span class="line">    <span class="comment">#比如说9+9会向前面进一位,如果没有添加额外的0的话进位1就没地方存储</span></span><br><span class="line">    a = list(map(<span class="keyword">lambda</span> x : int(x), (<span class="string">"0"</span> + str(a)).strip()))</span><br><span class="line">    b = list(map(<span class="keyword">lambda</span> x : int(x), (<span class="string">"0"</span> + str(b)).strip()))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a) - <span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">        temp = a[i] + b[i];</span><br><span class="line">        a[i - <span class="number">1</span>] += temp // <span class="number">10</span></span><br><span class="line">        a[i] = temp % <span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span> int(reduce(<span class="keyword">lambda</span> x, y : str(x) + str(y), a))<span class="comment">#转换为字符串</span></span><br><span class="line"></span><br><span class="line">a, b = input(<span class="string">"input a: "</span>), input(<span class="string">"input b: "</span>)</span><br><span class="line">print(add(a, b))</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-25T14:10:29.000Z"><a href="/2015/05/25/搭建Hexo博客的简单步骤/">2015-05-25</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/25/搭建Hexo博客的简单步骤/">搭建Hexo博客的简单步骤</a></h1>
  

    </header>
    <div class="entry">
      
        <p>前期准备,注册github账号,并创建GitHub Pages<br>1:安装<a href="https://nodejs.org/" target="_blank" rel="external">node.js</a><br>2:安装<a href="http://git-scm.com/" target="_blank" rel="external">git</a><br>3:在你的计算机中创建一个工作根目录,比如我是将hexo目录创建在D盘的. <font color="0080ff">D:\hexo</font><br>3:打开工作根目录,右键调出gitbash<br>4:输入npm install -g hexo<br>5:输入hexo init<br>6:输入npm install<br>7:检查ssh_key</p>
<pre><code>ls -al ~/.ssh
<span class="comment">#如果没有请输入:</span>
ssh-keygen -t rsa -C <span class="string">"github注册邮箱"</span>
<span class="comment">#输入passphrase:要记住,后面用</span>
ssh-agent <span class="operator">-s</span>
ssh-add ~/.ssh/id_rsa <span class="comment">#如果本行出错执行下面两行</span>
<span class="built_in">eval</span> `ssh-agent <span class="operator">-s</span>`
ssh-add
<span class="comment">#然后在用户目录中找到.ssh目录中的id_rsa.pub,打开并复制其内容添加到github的ssh key中</span>
</code></pre><p>8:测试ssh_key是否成功</p>
<pre><code><span class="title">ssh</span> -T git<span class="variable">@github</span>.com
<span class="comment">#如果输出hi yourname... 那就正常了</span>
</code></pre><p>9:添加用户信息</p>
<pre><code>git config --<span class="built_in">global</span> user.name <span class="string">"cnfeat"</span> <span class="comment">#用户名</span>
git config --<span class="built_in">global</span> user.email  <span class="string">"cnfeat@gmail.com"</span> <span class="comment">#填写自己的邮箱</span>
</code></pre><p>10:编辑本地根目录中的配置文件<font color="0080ff">_config.yml</font>,添加github仓库信息</p>
<pre><code><span class="attribute">deploy</span>:
<span class="attribute">type</span>: git
<span class="attribute">repository</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:you_name/your_name.github.io.git
<span class="attribute">branch</span>: master
</code></pre><p>11:使用</p>
<pre><code><span class="title">hexo</span> n <span class="comment">#添加新文章</span>
hexo g <span class="comment">#生成文章</span>
hexo d <span class="comment">#发布</span>
hexo s <span class="comment">#打开本地服务器测试:localhost:4000</span>
</code></pre><p>注意:如果发布出现deplorer not found git,请使用如下命令,由于显示的原因,提示一下末尾的”—save”也是在命令中的:</p>
<pre><code>npm <span class="operator"><span class="keyword">install</span> hexo-deployer-git <span class="comment">--save </span></span>
</code></pre>
      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-25T07:41:45.000Z"><a href="/2015/05/25/python34-访问MySQL数据库/">2015-05-25</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/25/python34-访问MySQL数据库/">python34 访问MySQL数据库</a></h1>
  

    </header>
    <div class="entry">
      
        <p>本文介绍如何使用MySQL官方提供的工具访问MySQL数据库<br>首先下载<a href="http://dev.mysql.com/downloads/connector/python/" target="_blank" rel="external">connector/python</a>, 这是一个.msi的安装文件,下载后双击安装到电脑, 然后开始连接数据库</p>
<h3 id="连接方式1">连接方式1</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line">cnx = mysql.connector.connect(user = <span class="string">"root"</span>, password = <span class="string">"admin"</span>, host = <span class="string">"127.0.0.1"</span>, database = <span class="string">"world"</span>)</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure>
<h3 id="连接方式2">连接方式2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> mysql.connector <span class="keyword">import</span> (connection)</span><br><span class="line">cnx = connection.MySQLConnection(user=<span class="string">'scott'</span>, password=<span class="string">'tiger'</span>, host=<span class="string">'127.0.0.1'</span>, database=<span class="string">'employees'</span>)</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure>
<p>两种连接方式都使用了connector,他们的作用是一样的,通常第一种方式用的更多</p>
<h3 id="连接方式3">连接方式3</h3><p>如果连接的参数较多,可以使用**运算符直接给connect()传递一个字典,以方便代码的维护</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">config = &#123;</span><br><span class="line">    <span class="string">"user"</span> : <span class="string">"root"</span>, </span><br><span class="line">    <span class="string">"password"</span> : <span class="string">"admin"</span>, </span><br><span class="line">    <span class="string">"host"</span> : <span class="string">"127.0.0.1"</span>, </span><br><span class="line">    <span class="string">"database"</span> : <span class="string">"world"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cnx = mysql.connector.connect(**config)</span><br><span class="line">cnx.close()</span><br></pre></td></tr></table></figure>
<p>我们可以访问数据库的过程加上异常处理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"><span class="keyword">from</span> mysql.connector <span class="keyword">import</span> errorcode</span><br><span class="line">cnx = <span class="keyword">None</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    cnx = mysql.connector.connect(user = <span class="string">"root"</span>, password = <span class="string">"admin"</span>, host = <span class="string">"127.0.0.1"</span>, database = <span class="string">"world"</span>)</span><br><span class="line"><span class="keyword">except</span> mysql.connector.Error <span class="keyword">as</span> err:  </span><br><span class="line">    <span class="keyword">if</span> err.errno == errorcode.ER_ACCESS_DENIED_ERROR:</span><br><span class="line">        print(<span class="string">"账户不存在或者密码错误"</span>)</span><br><span class="line">    <span class="keyword">elif</span> err.errno == errorcode.ER_BAD_DB_ERROR:</span><br><span class="line">        print(<span class="string">"数据库不存在"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(err)</span><br><span class="line">    print(err)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"连接成功"</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    cnx.close()</span><br></pre></td></tr></table></figure>  
<p>连接后使用cnx返回的cursor对象即可访问数据库表中的内容了<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cursor = cnx.cursor()</span><br><span class="line">sql = <span class="string">"select * from city where CountryCode = \"CHN\" order by Name asc limit 1000"</span></span><br><span class="line">cursor.execute(sql)</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> cursor:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-12T08:08:51.000Z"><a href="/2015/05/12/python-lambda表达式/">2015-05-12</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/12/python-lambda表达式/">python lambda表达式</a></h1>
  

    </header>
    <div class="entry">
      
        <p>什么是lambda表达式呢? 简单的说就是一个没有 “return” 语句的函数,或者叫”匿名函数”,看一个简单的lambda表达式例子</p>
<pre><code><span class="tag">lambda</span> <span class="rule"><span class="attribute">x </span>:<span class="value"> x + <span class="number">5</span></span></span>
</code></pre><p>lambda表达式有3个部分,第一部分就是”lambda”关键字的,标明这是一个lambda表达式,然后紧接着第二部分”变量”, 然后”:”后面接着第三部分”返回值”上面的表达式接收值x,然后返回x+5的值,相当于函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> n + <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>看看有多个参数的lambda表达式(返回三个数的和):</p>
<pre><code><span class="tag">lambda</span> <span class="tag">x</span>, <span class="tag">y</span>, <span class="rule"><span class="attribute">z </span>:<span class="value"> x + y + z</span></span>
</code></pre><p>那么lambda表达式和函数有什么区别呢, 直观的函数肯定要写更多的代码,而lambda仅仅是一行表达式, 假如我们仅仅是临时一次使用一个简单函数(通常只有1-3行规模的),这个函数再也没有其他的用途, 那么选择单独定义一个函数显然是不聪明的,因为要更多的代码,额外的命名. 因此lambda就能很愉快的解决这个问题.</p>
<p>还有一个特点就是lambda表示式是可以赋值的,并可以在函数中构造并返回, 看如下例子</p>
<pre><code><span class="attribute">g </span>=<span class="string"> lambda x : x + 5</span>
</code></pre><p>这里’g’就相当于是lambda表达式”lambda x : x + 5”, 然后像函数一样使用即可:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">5</span></span><br><span class="line">n = g(x)</span><br><span class="line">print(n)<span class="comment">#结果输出10</span></span><br></pre></td></tr></table></figure>
<p>看看通过参数构造不同的lambda表达式:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_increament</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">lambda</span> x: x + n</span><br><span class="line"></span><br><span class="line">f = make_increament(<span class="number">10</span>)<span class="comment">#构造为"lambda x : x + 10", 并返回给f</span></span><br><span class="line">g = make_increament(<span class="number">100</span>)<span class="comment">#构造为"lambda x : x + 100", 并返回给g</span></span><br><span class="line"></span><br><span class="line">print(f(<span class="number">5</span>))<span class="comment">#输出15</span></span><br><span class="line">print(g(<span class="number">5</span>))<span class="comment">#输出105</span></span><br></pre></td></tr></table></figure>
<h2 id="其他看起来比较叼的应用">其他看起来比较叼的应用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">foo = [<span class="number">2</span>, <span class="number">18</span>, <span class="number">9</span>, <span class="number">22</span>, <span class="number">17</span>, <span class="number">24</span>, <span class="number">8</span>, <span class="number">12</span>, <span class="number">27</span>]</span><br><span class="line">print(list(filter(<span class="keyword">lambda</span> x: x % <span class="number">3</span> == <span class="number">0</span>, foo)))<span class="comment">#过滤出能被3整出的数</span></span><br><span class="line"><span class="comment">#输出[18, 9, 24, 12, 27]</span></span><br><span class="line"></span><br><span class="line">print(list(map(<span class="keyword">lambda</span> x: x * <span class="number">10</span>, foo)))<span class="comment">#将列表中的每个数乘上10</span></span><br><span class="line"><span class="comment">#输出[20, 180, 90, 220, 170, 240, 80, 120, 270]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce <span class="comment">#python34要从tools中导入reduce()函数</span></span><br><span class="line">print(reduce(<span class="keyword">lambda</span> x, y: x + y, foo))<span class="comment">#求列表的和</span></span><br><span class="line"><span class="comment">#输出139</span></span><br><span class="line"></span><br><span class="line">sentence = <span class="string">"It is raining cats and dogs"</span></span><br><span class="line">lens = list(map(<span class="keyword">lambda</span> x: len(x), sentence.split()))<span class="comment">#得到每个单词的长度</span></span><br><span class="line">print(lens)</span><br><span class="line"><span class="comment">#输出[2, 2, 7, 4, 3, 4]</span></span><br></pre></td></tr></table></figure>
<h2 id="filter(),_map(),_reduce()的作用简介">filter(), map(), reduce()的作用简介</h2><p>filter()函数的功能相当于过滤器。调用一个布尔函数bool_func来迭代遍历每个seq中的元素；返回一个使bool_seq返回值为true的元素的序列。</p>
<p>map()函数处理一个列表里的所有元素，可以使用一个for循环来完成这个工作。但是Python内置的map函数可以帮我们的忙，它接受函数和列表作为参数，然后返回函数处理之后的列表：</p>
<p>reduce()函数对sequence中的item顺序迭代调用function，如果有starting_value，还可以作为初始值调用</p>
<h2 id="附上python34文档对于上述三个函数的说明">附上python34文档对于上述三个函数的说明</h2><h3 id="map(function,_iterable,_…)">map(function, iterable, …)</h3><p>Return an iterator that applies function to every item of iterable, yielding the results. If additional iterable arguments are passed, function must take that many arguments and is applied to the items from all iterables in parallel. With multiple iterables, the iterator stops when the shortest iterable is exhausted. For cases where the function inputs are already arranged into argument tuples, see</p>
<h3 id="functools-reduce(function,_iterable[,_initializer])">functools.reduce(function, iterable[, initializer])</h3><p>Apply function of two arguments cumulatively to the items of sequence, from left to right, so as to reduce the sequence to a single value. For example, reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates ((((1+2)+3)+4)+5). The left argument, x, is the accumulated value and the right argument, y, is the update value from the sequence. If the optional initializer is present, it is placed before the items of the sequence in the calculation, and serves as a default when the sequence is empty. If initializer is not given and sequence contains only one item, the first item is returned.</p>
<h3 id="filter(function,_iterable)">filter(function, iterable)</h3><p>Construct an iterator from those elements of iterable for which function returns true. iterable may be either a sequence, a container which supports iteration, or an iterator. If function is None, the identity function is assumed, that is, all elements of iterable that are false are removed.<br>Note that filter(function, iterable) is equivalent to the generator expression (item for item in iterable if function(item)) if function is not None and (item for item in iterable if item) if function is None.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-07T13:11:27.000Z"><a href="/2015/05/07/最大公约数的新理解/">2015-05-07</a></time>
      
      
  
    <h1 class="title"><a href="/2015/05/07/最大公约数的新理解/">最大公约数的新理解</a></h1>
  

    </header>
    <div class="entry">
      
        <p>今天在做一道题时要用到最大公约数,数据据范围是任意整数,也就是说正负数,包括0都要能正确无误的的计算出最大公约数,我才突然发现我之前求公约数函数有很大的局限性,即只能求两个正整数的公约数,我之前的方法就是始终用大的数去除以小的数,然后不断求余迭代,直到余数为0,然后输出公约数.</p>
<p>这是我之前求公约数的方法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; b)</span><br><span class="line">        swap(a, b);</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">int</span> t = a % b)</span><br><span class="line">    &#123;</span><br><span class="line">        a = b;</span><br><span class="line">        b = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从代码就能看出, 一旦遇到0, 程序就不能正常运行了.参考了一下他人的代码才发现比较大小的过程是没有必要的, 因为在一次循环后大小顺序已经交换了.假如现在求12和16的公约数, 首先是执行<font color="0080ff">12/16=0…12</font>, 然后迭代一次, 自然就得到了<font color="0080ff">16/12=1…4</font>的过程.处理这个问题还有一个更重要的地方就是如果遇到其中一个数0, 那么公约数就是另外一个, 因为0是不能作为约数的, 所有循环中的条件就应该检查被除数b是否为0, 而不是检查a除以b的余数是否为0.</p>
<p>综上, 得到了新的公约数算法,以下分别是循环版和递归版的算法:</p>
<h3 id="循环版本">循环版本</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> t = a % b;</span><br><span class="line">        a = b;</span><br><span class="line">        b = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="递归版本(短小精悍的代码)">递归版本(短小精悍的代码)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !b ? a : gcd2(b, a % b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就能计算任意两个整数的公约数, 之前写的代码简直太挫了…</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/" class="alignleft prev">上一页</a>
  
  
    <a href="/page/3/" class="alignright next">下一页</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/C/">C</a><small>1</small></li>
  
    <li><a href="/categories/C/">C++</a><small>2</small></li>
  
    <li><a href="/categories/Hexo/">Hexo</a><small>2</small></li>
  
    <li><a href="/categories/Life/">Life</a><small>1</small></li>
  
    <li><a href="/categories/Linux/">Linux</a><small>1</small></li>
  
    <li><a href="/categories/Operating-System/">Operating System</a><small>1</small></li>
  
    <li><a href="/categories/Other/">Other</a><small>1</small></li>
  
    <li><a href="/categories/Python/">Python</a><small>9</small></li>
  
    <li><a href="/categories/sublime-text/">sublime text</a><small>2</small></li>
  
    <li><a href="/categories/windows/">windows</a><small>1</small></li>
  
    <li><a href="/categories/高精度/">高精度</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/C/">C++</a><small>1</small></li>
  
    <li><a href="/tags/MySQL/">MySQL</a><small>1</small></li>
  
    <li><a href="/tags/c-高精度/">c++ 高精度</a><small>1</small></li>
  
    <li><a href="/tags/hexo/">hexo</a><small>3</small></li>
  
    <li><a href="/tags/lambda表达式/">lambda表达式</a><small>1</small></li>
  
    <li><a href="/tags/linux/">linux</a><small>1</small></li>
  
    <li><a href="/tags/other/">other</a><small>1</small></li>
  
    <li><a href="/tags/python/">python</a><small>2</small></li>
  
    <li><a href="/tags/python字典/">python字典</a><small>1</small></li>
  
    <li><a href="/tags/sublime-text/">sublime text</a><small>2</small></li>
  
    <li><a href="/tags/test/">test</a><small>1</small></li>
  
    <li><a href="/tags/位运算/">位运算</a><small>1</small></li>
  
    <li><a href="/tags/命令行/">命令行</a><small>1</small></li>
  
    <li><a href="/tags/字符串/">字符串</a><small>1</small></li>
  
    <li><a href="/tags/学习/">学习</a><small>1</small></li>
  
    <li><a href="/tags/排序/">排序</a><small>1</small></li>
  
    <li><a href="/tags/生活/">生活</a><small>1</small></li>
  
    <li><a href="/tags/高精度/">高精度</a><small>3</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 xanarry
  
</div>
<div class="clearfix"></div></footer>
  <script src="/js/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'xanarry';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?05b8c86ae6be8be1243fc590c74bfde1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</body>
</html>